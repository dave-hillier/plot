import {BarY, Plot, RuleX, RuleY, TickX, TickY, normalizeX} from "replot/react";
import * as d3 from "d3";
import {useState} from "react";
import aapl from "../data/aapl.ts";
import alphabet from "../data/alphabet.ts";

export const stateage = [];

{/* Data: stateage is loaded externally from us-population-state-age.csv, pivoted from wide to tidy format with {state, age, population} rows and an .ages property listing age groups. */}

# Tick mark


The tick mark is one of two marks in Plot for drawing horizontal or vertical lines; it should be used when the secondary position dimension, if any, is ordinal. When it is quantitative, use a [rule](./rule.md).
The **tick mark** comes in two orientations: [tickY](#tickY) draws a horizontal↔︎ line with a given *y* value, while [tickX](#tickX) draws a vertical↕︎ line with a given *x* value. Ticks have an optional secondary position dimension (**x** for tickY and **y** for tickX); this second dimension is ordinal, unlike a [rule](./rule.md), and requires a corresponding [band scale](../features/scales.md).

Ticks are often used to show one-dimensional distributions, as in the “barcode” plot below showing the proportion of the population in each age bracket across U.S. states.

<Plot x={{
    grid: true,
    label: "Population (%)",
    percent: true
  }} y={{
    domain: stateage.ages, // in age order
    reverse: true,
    label: "Age (years)",
    labelAnchor: "top"
  }}>
  <RuleX data={[0]} />
  <TickX data={stateage} {...normalizeX("sum", {z: "state", x: "population", y: "age"})} />
</Plot>

Both ticks and [bars](./bar.md) have an ordinal secondary position dimension; a tick is therefore convenient for stroking the upper bound of a bar for emphasis, as in the bar chart below. A separate [rule](./rule.md) is also used to denote *y* = 0.

<Plot x={{label: null}} y={{percent: true}}>
  <BarY data={alphabet} x="letter" y="frequency" fillOpacity={0.2} />
  <TickY data={alphabet} x="letter" y="frequency" />
  <RuleY data={[0]} />
</Plot>

When there is no secondary position dimension, a tick behaves identically to a [rule](./rule.md). While a one-dimensional rule and tick are equivalent, a one-dimensional rule is generally preferred, if only because the name “rule” is more descriptive. But as an example below, a random normal distribution is plotted below with ticks.

<Plot x={{domain: [-4, 4]}}>
  <TickX data={{length: 500}} x={d3.randomNormal.source(d3.randomLcg(42))()} strokeOpacity={0.2} />
</Plot>


Reducing opacity allows better perception of density when ticks overlap.
Ticks are also used by the [box mark](./box.md) to denote the median value for each group.

## Tick options

For the required channels, see [tickX](#tickX) and [tickY](#tickY). The tick mark supports the [standard mark options](../features/marks.md#mark-options), including insetS, and [marker options](../features/markers.md) to add a marker (such as a dot or an arrowhead) to the start or end of the rule. The **stroke** defaults to *currentColor*.

## tickX(*data*, *options*)
```js
Plot.tickX(stateage, {x: "population", y: "age"})
```

Returns a new vertical↕︎ tick with the given *data* and *options*. The following channels are required:

* **x** - the horizontal position; bound to the *x* scale

The following optional channels are supported:

* **y** - the vertical position; bound to the *y* scale, which must be *band*

If the **y** channel is not specified, the tick will span the full vertical extent of the frame.

## tickY(*data*, *options*)
```js
Plot.tickY(stateage, {y: "population", x: "age"})
```

Returns a new horizontal↔︎ tick with the given *data* and *options*. The following channels are required:

* **y** - the vertical position; bound to the *y* scale

The following optional channels are supported:

* **x** - the horizontal position; bound to the *x* scale, which must be *band*

If the **x** channel is not specified, the tick will span the full vertical extent of the frame.
